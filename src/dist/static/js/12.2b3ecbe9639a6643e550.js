webpackJsonp([12,26],{"5UO6":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("x3IM"),s=i("OWth"),r=i("E4LH"),d={name:"clientAddressList",directives:{waves:i("cAgV").a},components:{city:s.default},data:function(){return{textMap:{update:"Edit",create:"Create"},dialogStatus:"",dialogFormVisible:!1,tableKey:0,list:null,listLoading:!0,pageQuery:{clientId:void 0,clientName:void 0,mobile:void 0},cityData:{provinceId:void 0,provinceName:void 0,cityId:void 0,cityName:void 0,areaId:void 0,areaName:void 0},creatClientAddress:{},rules:{address:[{required:!0,message:"详细地址不能为空",trigger:"blur"},{min:2,max:20,message:"长度在2到20个字符",trigger:"blur"}],mobile:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{validator:function(e,t,i){t&&!Object(r.b)(t)&&i(new Error("请输入正确的手机号码")),i()},trigger:"blur"}]},addClientAddress:!1,editClientAddress:!1,deleteClientAddress:!1}},watch:{},created:function(){var e=this;this.$store.dispatch("getPagePermission","clientAddressList").then(function(t){e.addClientAddress=t.addClientAddress,e.editClientAddress=t.editClientAddress,e.deleteClientAddress=t.deleteClientAddress}),this.pageQuery.clientId=this.$route.query.clientId,this.pageQuery.clientName=this.$route.query.clientName,this.pageQuery.mobile=this.$route.query.mobile,this.getList()},methods:{getCityData:function(e){this.creatClientAddress=e},getList:function(){var e=this;this.listLoading=!0,Object(a.k)(this.pageQuery.clientId).then(function(t){e.list=t.data.data,e.listLoading=!1})},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.creatClientAddress={clientAddressId:0,clientId:this.pageQuery.clientId,fullAddress:void 0,mobile:this.pageQuery.mobile,address:void 0,provinceId:void 0,provinceName:void 0,cityId:void 0,cityName:void 0,areaId:void 0,areaName:void 0},this.$nextTick(function(){e.$refs.creatClientAddressForm.clearValidate()})},handleUpdate:function(e){var t=this;this.dialogStatus="update",this.creatClientAddress={clientAddressId:e.clientAddressId,clientId:e.clientId,fullAddress:e.fullAddress,mobile:e.mobile,address:e.address,provinceId:e.provinceId,provinceName:e.provinceName,cityId:e.cityId,cityName:e.cityName,areaId:e.areaId,areaName:e.areaName},this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.creatClientAddressForm.clearValidate()})},setFullAddress:function(){this.creatClientAddress.fullAddress="",this.creatClientAddress.provinceName&&(this.creatClientAddress.fullAddress=this.creatClientAddress.provinceName),this.creatClientAddress.cityName&&(this.creatClientAddress.fullAddress=this.creatClientAddress.fullAddress+" "+this.creatClientAddress.cityName),this.creatClientAddress.areaName&&(this.creatClientAddress.fullAddress=this.creatClientAddress.fullAddress+" "+this.creatClientAddress.areaName),this.creatClientAddress.fullAddress=this.creatClientAddress.fullAddress+" "+this.creatClientAddress.address},addSumbit:function(e){var t=this;this.$refs.creatClientAddressForm.validate(function(i){i&&t.reqAddEditSumbit(e,!1)})},reqAddEditSumbit:function(e,t){var i=this;this.setFullAddress(),Object(a.d)(this.creatClientAddress,e).then(function(e){i.dialogFormVisible=!1,i.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t||i.getList()})},handleDel:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.fullAddress+"】, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.h)(e.clientAddressId).then(function(){t.$message({type:"success",message:"删除成功!"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[e.addClientAddress?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))]):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"旺旺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t?i("span",[e._v(e._s(e.pageQuery.clientName))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"详细地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.fullAddress))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"手机号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.mobile))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"100%"},attrs:{align:"center",label:e.$t("table.actions"),"class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editClientAddress?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleUpdate(t.row)}}},[e._v(e._s(e.$t("table.edit")))]):e._e(),e._v(" "),e.deleteClientAddress&&null!=e.list&&e.list.length>1?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(i){e.handleDel(t.row)}}}):e._e()]}}])})],1),e._v(" "),i("el-dialog",{attrs:{fullscreen:this.isMobile,title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"creatClientAddressForm",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.creatClientAddress,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"旺旺名称"}},[i("el-input",{attrs:{autosize:"",placeholder:"Please input",disabled:""},model:{value:e.pageQuery.clientName,callback:function(t){e.$set(e.pageQuery,"clientName",t)},expression:"pageQuery.clientName"}})],1),e._v(" "),i("city",{attrs:{data:e.creatClientAddress},on:{"get-data":e.getCityData}}),e._v(" "),i("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[i("el-input",{attrs:{autosize:"",placeholder:"Please input"},model:{value:e.creatClientAddress.address,callback:function(t){e.$set(e.creatClientAddress,"address",t)},expression:"creatClientAddress.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[i("el-input",{attrs:{autosize:"",placeholder:"Please input"},model:{value:e.creatClientAddress.mobile,callback:function(t){e.$set(e.creatClientAddress,"mobile",e._n(t))},expression:"creatClientAddress.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-tag",{attrs:{type:"danger"}},[e._v("地址=省+市+区+详细地址")])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSumbit(e.dialogStatus)}}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},staticRenderFns:[]},n=i("VU/8")(d,l,!1,null,null,null);t.default=n.exports},OWth:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("x3IM"),s={name:"selectCity",data:function(){return{cityArray:[11e4,12e4,31e4,5e5],create:!0,cityStatus:!1,provinceId:void 0,cityId:void 0,province:[],city:[],area:[]}},props:["data"],methods:{convert:function(e,t){var i=e.find(function(e){return e.key==t});if(i)return i.value},getData:function(e,t){var i=this;Object(a.j)(e).then(function(e){switch(t){case"province":i.province=e.data.data;break;case"city":i.city=e.data.data;break;case"area":i.area=e.data.data}})},getProvince:function(){this.create&&(this.create=!1,this.getData(0,"province")),this.data.provinceId&&this.changeProvince(this.data.provinceId,!0),this.data.cityId&&this.changeCity(this.data.cityId,!0)},changeProvince:function(e,t){this.cityArray.indexOf(this.data.provinceId)>-1?this.cityId!=e&&(this.cityId=e,this.getData(e,"area"),this.cityStatus=!0):this.provinceId!=e&&(this.area=[],this.provinceId=e,this.getData(e,"city"),this.cityStatus=!1),t||(this.data.cityId=void 0,this.data.areaId=void 0,this.data.provinceName=this.convert(this.province,e),this.sendToParent())},changeCity:function(e,t){this.cityStatus=!1,this.cityId!=e&&(this.cityId=e,this.getData(e,"area")),t||(this.data.areaId=void 0,this.data.cityName=this.convert(this.city,e),this.sendToParent())},changeArea:function(e){this.data.areaName=this.convert(this.area,e),this.sendToParent()},sendToParent:function(){this.$emit("get-data",this.data)}},created:function(){this.getProvince()},watch:{data:{handler:function(e,t){this.getProvince()},immediate:!0,deep:!0}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("el-form-item",{attrs:{label:"省级"}},[i("el-select",{staticClass:"filter-item",attrs:{autosize:"",placeholder:"Please select"},on:{change:e.changeProvince},model:{value:e.data.provinceId,callback:function(t){e.$set(e.data,"provinceId",t)},expression:"data.provinceId"}},e._l(e.province,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"市级"}},[i("el-select",{staticClass:"filter-item",attrs:{autosize:"",placeholder:"Please select",disabled:e.cityStatus},on:{change:e.changeCity},model:{value:e.data.cityId,callback:function(t){e.$set(e.data,"cityId",t)},expression:"data.cityId"}},e._l(e.city,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"区级"}},[i("el-select",{staticClass:"filter-item",attrs:{autosize:"",placeholder:"Please select"},on:{change:e.changeArea},model:{value:e.data.areaId,callback:function(t){e.$set(e.data,"areaId",t)},expression:"data.areaId"}},e._l(e.area,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1)],1)},staticRenderFns:[]},d=i("VU/8")(s,r,!1,null,null,null);t.default=d.exports}});