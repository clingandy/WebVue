webpackJsonp([17],{VuHg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("x3IM"),l={name:"orderList",directives:{waves:r("cAgV").a},data:function(){return{dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogFormVisible:!1,tableKey:0,list:null,total:null,listLoading:!0,listQuery:{pageIndex:1,pageSize:10,productName:void 0,clientName:void 0,mobile:void 0,createDate:void 0,orderStatus:void 0},orderStatusOptions:[],shippingTypeOptions:[],creatOrder:{},rules:{status:[{required:!0,message:"状态不能为空",trigger:"blur"}],shippingType:[{required:!0,message:"快递不能为空",trigger:"blur"}],freightPrice:[{required:!0,message:"运费不能为空",trigger:"change"},{type:"number",message:"请输入数字格式",trigger:"blur",transform:function(e){return Number(e)}}],totlaPrice:[{required:!0,message:"总价格不能为空",trigger:"change"},{type:"number",message:"请输入数字格式",trigger:"blur",transform:function(e){return Number(e)}}],fullAddress:[{required:!0,message:"收货地址不能为空",trigger:"blur"}]},addOrder:!1,editOrder:!1}},watch:{},created:function(){var e=this;this.$store.dispatch("getPagePermission","orderList").then(function(t){e.addOrder=t.addOrder,e.editOrder=t.editOrder}),this.getOrderStatus(),this.getShippingType(),this.getList()},methods:{getFileUrl:function(e){return"http://47.99.217.95:8091"+e},typeConvert:function(e,t){var r=t.find(function(t){return t.key==e});if(r)return r.value},getOrderStatus:function(){var e=this;Object(a.r)().then(function(t){e.orderStatusOptions=t.data.data})},getShippingType:function(){var e=this;Object(a.n)(5).then(function(t){e.shippingTypeOptions=t.data.data})},getTagType:function(e){switch(e){case 1:case 2:case 3:case 4:return"";case 5:return"success";default:return"info"}},getList:function(){var e=this;this.listLoading=!0,Object(a.q)(this.listQuery).then(function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageIndex=e,this.getList()},handleFilter:function(){this.listQuery.pageIndex=1,this.getList()},handleCreate:function(){this.$router.push({path:"/screw/addOrder"})},handleUpdate:function(e){var t=this;this.dialogStatus="update",this.creatOrder=e.order,this.creatOrder.clientName=e.clientName,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.editOrderForm.clearValidate()})},addSumbit:function(e){var t=this;this.$refs.editOrderForm.validate(function(r){r&&Object(a.u)(t.creatOrder,e).then(function(e){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})})})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container calendar-list-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.productName,callback:function(t){e.$set(e.listQuery,"productName",t)},expression:"listQuery.productName"}}),e._v(" "),r("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"旺旺名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.clientName,callback:function(t){e.$set(e.listQuery,"clientName",t)},expression:"listQuery.clientName"}}),e._v(" "),r("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"手机号码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.mobile,callback:function(t){e.$set(e.listQuery,"mobile",t)},expression:"listQuery.mobile"}}),e._v(" "),r("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"订单状态"},model:{value:e.listQuery.orderStatus,callback:function(t){e.$set(e.listQuery,"orderStatus",t)},expression:"listQuery.orderStatus"}},e._l(e.orderStatusOptions,function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),e._v(" "),r("el-date-picker",{staticStyle:{width:"230px","vertical-align":"middle","margin-bottom":"10px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.listQuery.createDate,callback:function(t){e.$set(e.listQuery,"createDate",t)},expression:"listQuery.createDate"}}),e._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),e.addOrder?r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))]):e._e()],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{key:t.row.order.orderId,staticStyle:{width:"100%"},attrs:{data:t.row.orderItem,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"left",label:"产品分类 产品名称 规格 材质 外观",width:"480"},scopedSlots:e._u([{key:"default",fn:function(a){return[r("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.getFileUrl(t.row.imgUrl)}}),e._v(" "),r("router-link",{attrs:{to:{path:"/screw/productHistory",query:{pid:a.row.productId}}}},[e._v(e._s(a.row.productFullName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.count))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"重量(KG)"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("toFixed")(t.row.weight,3)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"单价(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("toFixed")(t.row.singlePrice,2)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"总价(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("toFixed")(t.row.totalPrice,2)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"购买地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.productUrl?r("a",{attrs:{target:"_blank",href:t.row.productUrl}},[e._v("地址")]):e._e()]}}])})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("table.id"),width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.orderId))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"旺旺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.clientName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"物流类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.typeConvert(t.row.order.shippingType,e.shippingTypeOptions)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"物流单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.shippingCode))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"运费"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("toFixed")(t.row.order.freightPrice,2)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"总价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("toFixed")(t.row.order.totlaPrice,2)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"收货地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.fullAddress))])]}}])}),e._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.description))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("table.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{staticStyle:{"margin-left":"1px"},attrs:{type:e.getTagType(t.row.order.status)}},[e._v(e._s(e.typeConvert(t.row.order.status,e.orderStatusOptions)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("formatDate")(t.row.order.createTime,"yyyy-MM-dd hh:mm")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("table.actions"),"class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editOrder&&t.row.order.status<5?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){e.handleUpdate(t.row)}}},[e._v(e._s(e.$t("table.edit")))]):e._e()]}}])})],1),e._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageIndex,"page-sizes":[10,20,30,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{fullscreen:this.isMobile,title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"editOrderForm",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.creatOrder,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"旺旺名称",prop:"clientName"}},[r("el-input",{attrs:{autosize:"",placeholder:"Please input",disabled:!0},model:{value:e.creatOrder.clientName,callback:function(t){e.$set(e.creatOrder,"clientName",t)},expression:"creatOrder.clientName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{staticClass:"filter-item",attrs:{autosize:"",placeholder:"Please select"},model:{value:e.creatOrder.status,callback:function(t){e.$set(e.creatOrder,"status",t)},expression:"creatOrder.status"}},e._l(e.orderStatusOptions,function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"物流类型",prop:"shippingType"}},[r("el-select",{staticClass:"filter-item",attrs:{autosize:"",placeholder:"Please select"},model:{value:e.creatOrder.shippingType,callback:function(t){e.$set(e.creatOrder,"shippingType",t)},expression:"creatOrder.shippingType"}},e._l(e.shippingTypeOptions,function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"物流单号",prop:"shippingCode"}},[r("el-input",{attrs:{autosize:"",placeholder:"Please input"},model:{value:e.creatOrder.shippingCode,callback:function(t){e.$set(e.creatOrder,"shippingCode",t)},expression:"creatOrder.shippingCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"运费",prop:"freightPrice"}},[r("el-input",{attrs:{autosize:"",placeholder:"Please input"},model:{value:e.creatOrder.freightPrice,callback:function(t){e.$set(e.creatOrder,"freightPrice",t)},expression:"creatOrder.freightPrice"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"总价格",prop:"totlaPrice"}},[r("el-input",{attrs:{autosize:"",placeholder:"Please input"},model:{value:e.creatOrder.totlaPrice,callback:function(t){e.$set(e.creatOrder,"totlaPrice",t)},expression:"creatOrder.totlaPrice"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"收货地址",prop:"fullAddress"}},[r("el-input",{attrs:{type:"textarea",rows:2,autosize:"",placeholder:"Please input"},model:{value:e.creatOrder.fullAddress,callback:function(t){e.$set(e.creatOrder,"fullAddress",t)},expression:"creatOrder.fullAddress"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:2,autosize:"",placeholder:"Please input"},model:{value:e.creatOrder.description,callback:function(t){e.$set(e.creatOrder,"description",t)},expression:"creatOrder.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSumbit(e.dialogStatus)}}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},staticRenderFns:[]},n=r("VU/8")(l,i,!1,null,null,null);t.default=n.exports}});